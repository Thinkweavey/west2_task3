//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by FernFlower decompiler)
//

package goods;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.Date;
import util.DbUtil;

public class GoodsAdd {
    public GoodsAdd() {
    }

    public static void main(String[] args) {
        Connection conn = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        String sql = "insert into `goods`(id,code,title,description,price) values (? ,? ,? ,? ,? )";
        String sql1 = "select code from goods where title = ?";
        String code = String.valueOf((new Date()).getTime());
        String title = "高爷家猫砂";
        String description = "高爷家猫砂来了呀";
        String price = "85";

        try {
            conn = DbUtil.getCon();
            pstmt = conn.prepareStatement(sql1);
            pstmt.setObject(1, title);
            rs = pstmt.executeQuery();

            String code1;
            for(code1 = ""; rs.next(); code1 = rs.getString("code")) {
            }

            if (!"".equals(code1)) {
                System.out.println("商品名称已存在！");
            } else {
                pstmt = conn.prepareStatement(sql);
                pstmt.setObject(1, (Object)null);
                pstmt.setObject(2, code);
                pstmt.setObject(3, title);
                pstmt.setObject(4, description);
                pstmt.setObject(5, price);
                int i = pstmt.executeUpdate();
                System.out.println(i > 0 ? "新增成功" : "新增失败");
            }
        } catch (Exception var15) {
            var15.printStackTrace();
        } finally {
            DbUtil.close(conn, pstmt);
        }

    }
}
